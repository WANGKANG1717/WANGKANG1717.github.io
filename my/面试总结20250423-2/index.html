<!DOCTYPE html>
<html lang="en">

<!-- Head tag (contains Google-Analytics、Baidu-Tongji)-->
<head>
  <!-- Google Analytics -->
  

  <!-- Baidu Tongji -->
  

  <!-- Baidu Push -->
  
    <script>
      (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
      })();
    </script>
  

  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>

  <meta name="google-site-verification" content="lxDfCplOZbIzjhG34NuQBgu2gdyRlAtMB4utP5AgEBc"/>
  <meta name="baidu-site-verification" content="PpzM9WxOJU"/>

  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="description" content="It&#39;s an IT blog..."/>
  <meta name="keyword" content="C++,Java,SQL,WEB,图形学,实验,随笔"/>
  <link rel="shortcut icon" href="/img/avatar/head.png"/>

  <!-- Place this tag in your head or just before your close body tag. -->
  <script async="async" defer="defer" src="https://buttons.github.io/buttons.js"></script>

  
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css"/>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/beantech.min.css"/>

    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css"/>
    <link rel="stylesheet" href="/css/widget.css"/>
    <link rel="stylesheet" href="/css/rocket.css"/>
    <link rel="stylesheet" href="/css/signature.css"/>
    <link rel="stylesheet" href="/css/catalog.css"/>
    <link rel="stylesheet" href="/css/livemylife.css"/>

    
      <!-- wave start -->
      <link rel="stylesheet" href="/css/wave.css"/>
      <!-- wave end -->
    

    
      <!-- top start (article top hot config) -->
      <link rel="stylesheet" href="/css/top.css"/>
      <!-- top end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/scroll.css"/>
      <!-- ThemeColor end -->
    

    
      <!-- viewer start (Picture preview) -->
      <link rel="stylesheet" href="/css/viewer.min.css"/>
      <!-- viewer end -->
    

    
      <!-- Search start -->
      <link rel="stylesheet" href="/css/search.css"/>
      <!-- Search end -->
    

    
      <!-- ThemeColor start -->
      <link rel="stylesheet" href="/css/themecolor.css"/>
      <!-- ThemeColor end -->
    

    

    
      <!-- gitalk start -->
      <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css"> -->
      <link rel="stylesheet" href="/css/gitalk.css"/>
      <!-- gitalk end -->
    
  

  <!-- Custom Fonts -->
  <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
  <!-- Hux change font-awesome CDN to qiniu -->
  <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" type="text/css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

  <!-- Hux Delete, sad but pending in China <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'> <link
  href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/ css'> -->

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script> <![endif]-->

  <!-- ga & ba script hoook -->
  <link rel="canonical" href="https://wangkang1717.github.io/my/面试总结20250423-2/">
  <title>
    
      面试总结20250423-2 - dead or alive
    
  </title>
<meta name="generator" content="Hexo 5.4.0"></head>


<!-- hack iOS CSS :active style -->

	<body ontouchstart="" class="body--light body--light">


		<!-- ThemeColor -->
		
		<!-- ThemeColor -->
<style type="text/css">
  .body--light {
    --light-mode: none;
    --dark-mode: block;
  }
  .body--dark {
    --light-mode: block;
    --dark-mode: none;
  }
  i.mdui-icon.material-icons.light-mode {
    display: var(--light-mode);
  }
  i.mdui-icon.material-icons.dark-mode {
    display: var(--dark-mode);
  }
</style>
<div class="toggle" onclick="document.body.classList.toggle('body--dark')">
  <i class="mdui-icon material-icons light-mode"></i>
  <i class="mdui-icon material-icons dark-mode"></i>
</div>
<script>
  //getCookieValue
  function getCookieValue(a) {
    var b = document.cookie.match('(^|[^;]+)\\s*' + a + '\\s*=\\s*([^;]+)');
    return b
      ? b.pop()
      : '';
  }
  let themeMode = 'light';
  if (getCookieValue('sb-color-mode') && (getCookieValue('sb-color-mode') !== themeMode)) {
    let dbody = document.body.classList;
    themeMode === 'dark' ? dbody.remove('body--dark') : dbody.add('body--dark');
  }

  //setCookieValue
  var toggleBtn = document.querySelector(".toggle");
  toggleBtn.addEventListener("click", function () {
    var e = document.body.classList.contains("body--dark");
    var cookieString = e
      ? "dark"
      : "light";
    var exp = new Date();
    exp.setTime(exp.getTime() + 3 * 24 * 60 * 60 * 1000); //3天过期
    document.cookie = "sb-color-mode=" + cookieString + ";expires=" + exp.toGMTString() + ";path=/";
  });
</script>

		

		<!-- Gitter -->
		

		<!-- Navigation (contains search)-->
		<!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header page-scroll">
      <button type="button" class="navbar-toggle">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">WK&#39;website</a>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <!-- Known Issue, found by Hux: <nav>'s height woule be hold on by its content. so, when navbar scale out, the <nav> will cover tags. also mask any touch event of tags, unfortunately. -->
    <div id="huxblog_navbar">
      <div class="navbar-collapse">
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="/">HOME</a>
          </li>

          
          
          <li>
            <a href="/about/">
              
              ABOUT
              
              
            </a>
          </li>
          
          
          
          
          
          <li>
            <a href="/tags/">
              
              TAGS
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/archive/">
              
              ARCHIVES
              
              
            </a>
          </li>
          
          
          
          <li>
            <a href="/categories/">
              
              CATEGORIES
              
              
            </a>
          </li>
          
          

          
          <li>
            <a class="popup-trigger">
              <span class="search-icon"></span>SEARCH</a>
          </li>
          

          <!-- LangSelect -->
          
        </ul>
      </div>
    </div>
    <!-- /.navbar-collapse -->
  </div>
  <!-- /.container -->
</nav>
<!-- progress -->
<div id="progress">
  <div class="line" style="width: 0%;"></div>
</div>

<script>
  // Drop Bootstarp low-performance Navbar Use customize navbar with high-quality material design animation in high-perf jank-free CSS3 implementation
  var $body = document.body;
  var $toggle = document.querySelector('.navbar-toggle');
  var $navbar = document.querySelector('#huxblog_navbar');
  var $collapse = document.querySelector('.navbar-collapse');

  $toggle.addEventListener('click', handleMagic)

  function handleMagic(e) {
    if ($navbar.className.indexOf('in') > 0) {
      // CLOSE
      $navbar.className = " ";
      // wait until animation end.
      setTimeout(function() {
        // prevent frequently toggle
        if ($navbar.className.indexOf('in') < 0) {
          $collapse.style.height = "0px"
        }
      }, 400)
    } else {
      // OPEN
      $collapse.style.height = "auto"
      $navbar.className += " in";
    }
  }
</script>


		<!-- Post Header (contains intro-header、signature、wordcount、busuanzi、waveoverlay) -->
		<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->

  <style type="text/css">
    .body--light {
      /* intro-header */
      --intro-header-background-image-url-home: url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: url('/img/header_img/archive_bg3.jpg');
      --intro-header-background-image-url-page: url('//img/header_img/archive_bg3.jpg');
    }
    .body--dark {
      --intro-header-background-image-url-home: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/newhome_bg.jpg');
      --intro-header-background-image-url-post: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('/img/header_img/archive_bg3.jpg');
      --intro-header-background-image-url-page: linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.2)), url('//img/header_img/archive_bg3.jpg');
    }

    header.intro-header {
       /*post*/
        background-image: var(--intro-header-background-image-url-post);
        /* background-image: url('/img/header_img/archive_bg3.jpg'); */
      
    }

    
      #signature {/*signature*/
        background-image: url('/img/signature/wk.png');
      }
    
  </style>





<header class="intro-header">
  <!-- Signature -->
  <div id="signature">
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
          
          <div class="post-heading">
            <div class="tags">
              
              <a class="tag" href="/tags/#面试" title="面试">面试</a>
              
            </div>
            <h1>面试总结20250423-2</h1>
            <h2 class="subheading"></h2>
            <span class="meta">
              Posted by WK on
              2025-04-23
            </span>


            
            <!-- WordCount start -->
            <div class="blank_box"></div>
            <span class="meta">
              Estimated Reading Time <span class="post-count">27</span> Minutes
            </span>
            <div class="blank_box"></div>
            <span class="meta">
              Words <span class="post-count">7.8k</span> In Total
            </span>
            <div class="blank_box"></div>
            <!-- WordCount end -->
            
            
            <!-- 不蒜子统计 start -->
            <span class="meta" id="busuanzi_container_page_pv">
              Viewed <span id="busuanzi_value_page_pv"><i class="fa fa-spinner fa-spin"></i></span> Times
            </span>
            <!-- 不蒜子统计 end -->
            


          </div>
          
        </div>
      </div>
    </div>
  </div>

  
  <!-- waveoverlay start -->
  <div class="preview-overlay">
    <svg class="preview-waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
      <defs>
        <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
      </defs>
      <g class="preview-parallax">
        <use xlink:href="#gentle-wave" x="48" y="0" fill=var(--gentle-wave1)></use>
        <use xlink:href="#gentle-wave" x="48" y="3" fill=var(--gentle-wave2)></use>
        <use xlink:href="#gentle-wave" x="48" y="5" fill=var(--gentle-wave3)></use>
        <use xlink:href="#gentle-wave" x="48" y="7" fill=var(--gentle-wave)></use>
      </g>
    </svg>
  </div>
  <!-- waveoverlay end -->
  

</header>



		<!-- Main Content (Post contains
	Pager、
	tip、
	socialshare、
	gitalk、gitment、disqus-comment、
	Catalog、
	Sidebar、
	Featured-Tags、
	Friends Blog、
	anchorjs、
	) -->
		<!-- Modify by Yu-Hsuan Yen -->
<!-- Post Content -->
<article>
  <div class="container">
    <div class="row">
      <!-- Post Container -->
      <div class="col-lg-8 col-lg-offset-1 col-md-10 col-md-offset-1 post-container">

        <h1>tcp 协议理解</h1>
<h2 id="TCP-与-UDP-的区别（重要）">TCP 与 UDP 的区别（重要）</h2>
<ul>
<li>是否面向连接：UDP 在传送数据之前不需要先建立连接。而 TCP 提供面向连接的服务，在传送数据之前必须先建立连接，数据传送结束后要释放连接。</li>
<li>是否是可靠传输：远地主机在收到 UDP 报文后，不需要给出任何确认，并且不保证数据不丢失，不保证是否顺序到达。TCP 提供可靠的传输服务，TCP 在传递数据之前，会有三次握手来建立连接，而且在数据传递时，有确认、窗口、重传、拥塞控制机制。通过 TCP 连接传输的数据，无差错、不丢失、不重复、并且按序到达。</li>
<li>是否有状态：这个和上面的“是否可靠传输”相对应。TCP 传输是有状态的，这个有状态说的是 TCP 会去记录自己发送消息的状态比如消息是否发送了、是否被接收了等等。为此 ，TCP 需要维持复杂的连接状态表。而 UDP 是无状态服务，简单来说就是不管发出去之后的事情了。</li>
<li>传输效率：由于使用 TCP 进行传输的时候多了连接、确认、重传等机制，所以 TCP 的传输效率要比 UDP 低很多。</li>
<li>传输形式：TCP 是面向字节流的，UDP 是面向报文的。</li>
<li>首部开销：TCP 首部开销（20 ～ 60 字节）比 UDP 首部开销（8 字节）要大。</li>
<li>是否提供广播或多播服务：TCP 只支持点对点通信，UDP 支持一对一、一对多、多对一、多对多；</li>
</ul>
<h2 id="什么时候选择-TCP，什么时候选-UDP">什么时候选择 TCP，什么时候选 UDP?</h2>
<ul>
<li>
<p>UDP 一般用于即时通信，比如：语音、 视频、直播等等。这些场景对传输数据的准确性要求不是特别高，比如你看视频即使少个一两帧，实际给人的感觉区别也不大。</p>
</li>
<li>
<p>TCP 用于对传输准确性要求特别高的场景，比如文件传输、发送和接收邮件、远程登录等等。</p>
</li>
<li>
<h2 id="TCP-如何保证传输的可靠性？">TCP 如何保证传输的可靠性？</h2>
</li>
<li>
<p><strong>基于数据块传输</strong>：应用数据被分割成 TCP 认为最适合发送的数据块，再传输给网络层，数据块被称为报文段或段。</p>
</li>
<li>
<p><strong>对失序数据包重新排序以及去重</strong>：TCP 为了保证不发生丢包，就给每个包一个序列号，有了序列号能够将接收到的数据根据序列号排序，并且去掉重复序列号的数据就可以实现数据包去重。</p>
</li>
<li>
<p><strong>校验和</strong>: TCP 将保持它首部和数据的检验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错，TCP 将丢弃这个报文段和不确认收到此报文段。</p>
</li>
<li>
<p><strong>重传机制</strong>: 在数据包丢失或延迟的情况下，重新发送数据包，直到收到对方的确认应答（ACK）。TCP 重传机制主要有：基于计时器的重传（也就是超时重传）、快速重传（基于接收端的反馈信息来引发重传）、SACK（在快速重传的基础上，返回最近收到的报文段的序列号范围，这样客户端就知道，哪些数据包已经到达服务器了）、D-SACK（重复 SACK，在 SACK 的基础上，额外携带信息，告知发送方有哪些数据包自己重复接收了）。</p>
</li>
<li>
<p><strong>流量控制</strong>: TCP 连接的每一方都有固定大小的缓冲空间，TCP 的接收端只允许发送端发送接收端缓冲区能接纳的数据。当接收方来不及处理发送方的数据，能提示发送方降低发送的速率，防止包丢失。TCP 使用的流量控制协议是可变大小的滑动窗口协议（TCP 利用滑动窗口实现流量控制）。</p>
</li>
<li>
<p><strong>拥塞控制</strong>: 当网络拥塞时，减少数据的发送。TCP 在发送数据的时候，需要考虑两个因素：一是接收方的接收能力，二是网络的拥塞程度。接收方的接收能力由滑动窗口表示，表示接收方还有多少缓冲区可以用来接收数据。网络的拥塞程度由拥塞窗口表示，它是发送方根据网络状况自己维护的一个值，表示发送方认为可以在网络中传输的数据量。发送方发送数据的大小是滑动窗口和拥塞窗口的最小值，这样可以保证发送方既不会超过接收方的接收能力，也不会造成网络的过度拥塞。</p>
</li>
</ul>
<h1>三次握手和四次挥手具体说下</h1>
<p><img src="image.png" alt="alt text"><br>
<img src="image2.png" alt="alt text"></p>
<h1>建立连接半连接状态是什么</h1>
<p>在 TCP 三次握手过程中，Linux 内核会维护两个队列来管理连接请求：</p>
<ul>
<li>半连接队列（也称 SYN Queue）：当服务端收到客户端的 SYN 请求时，此时双方还没有完全建立连接，它会把半连接状态的连接放在半连接队列。</li>
<li>全连接队列（也称 Accept Queue）：当服务端收到客户端对 ACK 响应时，意味着三次握手成功完成，服务端会将该连接从半连接队列移动到全连接队列。如果未收到客户端的 ACK 响应，会进行重传，重传的等待时间通常是指数增长的。如果重传次数超过系统规定的最大重传次数，系统将从半连接队列中删除该连接信息。<br>
这两个队列的存在是为了处理并发连接请求，确保服务端能够有效地管理新的连接请求。</li>
</ul>
<h1>说下连接断开 time_wait 状态</h1>
<h2 id="什么是-TIME-WAIT-状态？">什么是 TIME_WAIT 状态？</h2>
<p>当 TCP 连接通过四次挥手断开时，主动关闭连接的一方（发送第一个 FIN 包的一方）在收到对方的最后一个 ACK 后，会进入 TIME_WAIT 状态。在此状态下，该连接不会立即关闭，而是保持一段时间（通常是 2 倍的最大报文生存时间，即 2MSL，Maximum Segment Lifetime）。</p>
<h2 id="为什么需要-TIME-WAIT-状态？">为什么需要 TIME_WAIT 状态？</h2>
<ul>
<li>确保最后的 ACK 能够到达被动关闭方
<ul>
<li>在四次挥手的最后一步，主动关闭方发送了一个 ACK 给被动关闭方。如果这个 ACK 在网络中丢失，被动关闭方会重发它的 FIN 包。</li>
<li>如果主动关闭方直接关闭连接而不进入 TIME_WAIT 状态，那么它将无法响应被动关闭方的重传请求，导致被动关闭方无法正常关闭连接。</li>
<li>进入 TIME_WAIT 状态可以确保主动关闭方有足够的时间来接收并处理可能的重传请求。</li>
</ul>
</li>
<li>防止旧的数据包干扰新的连接
<ul>
<li>TCP 使用序列号和确认号来保证数据的可靠传输。如果一个连接被关闭后，网络中仍然存在一些延迟的数据包（例如，由于网络拥塞或路由问题），这些数据包可能会被误认为是新连接的数据。</li>
<li>通过保持 TIME_WAIT 状态，旧连接的所有数据包在网络中都会超时并被丢弃，从而避免它们干扰新建立的连接。</li>
</ul>
</li>
<li>等待网络中所有相关资源释放
<ul>
<li>TIME_WAIT 状态还允许操作系统释放与该连接相关的资源，例如端口、缓存等。如果连接立即关闭，可能会导致资源未完全释放的问题。</li>
</ul>
</li>
</ul>
<h1>说下 https 协议过程</h1>
<p>HTTPS（HTTP Secure）是 HTTP 协议的安全版本，它通过 SSL（Secure Sockets Layer）或 TLS（Transport Layer Security）协议来加密客户端和服务器之间的通信，确保数据传输的安全性。下面是 HTTPS 协议的一个基本交互过程：</p>
<ol>
<li>建立 TCP 连接</li>
<li>SSL/TLS 握手过程：利用非加密对称传递加密对称的密钥</li>
<li>加密通信</li>
<li>关闭连接</li>
</ol>
<h1>说下 tls/ssl 四次握手</h1>
<p>TLS/SSL 握手是 HTTPS 协议中用于建立安全通信的关键步骤。它通过加密和认证机制，确保数据传输的机密性、完整性和身份验证。以下是 TLS/SSL 四次握手的详细过程：</p>
<hr>
<h3 id="1-Client-Hello（客户端问候）"><strong>1. Client Hello（客户端问候）</strong></h3>
<p>客户端向服务器发送一条 “Client Hello” 消息，包含以下内容：</p>
<ul>
<li><strong>支持的协议版本</strong>：例如 TLS 1.2 或 TLS 1.3。</li>
<li><strong>随机数 (Client Random)</strong>：一个由客户端生成的随机值，用于后续的密钥协商。</li>
<li><strong>加密套件列表</strong>：客户端支持的加密算法组合（如 AES、RSA、SHA 等）。</li>
<li><strong>会话 ID</strong>：如果客户端希望恢复之前的会话，会提供一个会话 ID。</li>
</ul>
<hr>
<h3 id="2-Server-Hello（服务器问候）"><strong>2. Server Hello（服务器问候）</strong></h3>
<p>服务器收到客户端的 “Client Hello” 后，回应一条 “Server Hello” 消息，包含以下内容：</p>
<ul>
<li><strong>选定的协议版本</strong>：服务器从客户端支持的协议版本中选择一个双方都支持的最高版本。</li>
<li><strong>随机数 (Server Random)</strong>：服务器生成的另一个随机值，用于后续的密钥协商。</li>
<li><strong>加密套件</strong>：服务器从客户端提供的加密套件列表中选择一个最优的加密算法组合。</li>
<li><strong>会话 ID</strong>：如果需要新会话或恢复旧会话，服务器会提供一个会话 ID。</li>
</ul>
<p>此外，服务器还会发送以下附加信息：</p>
<ul>
<li><strong>数字证书</strong>：服务器将自己的公钥证书发送给客户端，证书通常由受信任的 CA（证书颁发机构）签发，用于验证服务器的身份。</li>
<li><strong>（可选）请求客户端证书</strong>：在双向认证的情况下，服务器可能会要求客户端提供自己的证书。</li>
</ul>
<hr>
<h3 id="3-客户端密钥交换与验证"><strong>3. 客户端密钥交换与验证</strong></h3>
<p>客户端收到服务器的 “Server Hello” 后，执行以下操作：</p>
<h4 id="a-验证服务器的证书">a. 验证服务器的证书</h4>
<p>客户端使用受信任的 CA 公钥验证服务器证书的有效性，包括：</p>
<ul>
<li>证书是否由可信的 CA 签发。</li>
<li>证书是否过期。</li>
<li>证书中的域名是否与当前访问的域名匹配。</li>
</ul>
<h4 id="b-生成预主密钥-Pre-Master-Secret">b. 生成预主密钥 (Pre-Master Secret)</h4>
<p>客户端生成一个随机的预主密钥，并使用服务器的公钥（从证书中提取）对其进行加密，然后发送给服务器。这个预主密钥将用于生成最终的会话密钥。</p>
<h4 id="c-（可选）发送客户端证书">c. （可选）发送客户端证书</h4>
<p>如果服务器要求客户端认证，客户端会在此时发送自己的证书。</p>
<h4 id="d-发送-“Client-Key-Exchange”-消息">d. 发送 “Client Key Exchange” 消息</h4>
<p>客户端将加密后的预主密钥发送给服务器。</p>
<h4 id="e-计算会话密钥">e. 计算会话密钥</h4>
<p>客户端根据之前交换的两个随机数（Client Random 和 Server Random）以及预主密钥，通过一个密钥派生函数（如 PRF），计算出会话密钥（对称密钥）。这个密钥将用于后续的加密通信。</p>
<hr>
<h3 id="4-服务器密钥交换与完成握手"><strong>4. 服务器密钥交换与完成握手</strong></h3>
<p>服务器收到客户端的 “Client Key Exchange” 消息后，执行以下操作：</p>
<h4 id="a-解密预主密钥">a. 解密预主密钥</h4>
<p>服务器使用自己的私钥解密客户端发送的预主密钥。</p>
<h4 id="b-计算会话密钥">b. 计算会话密钥</h4>
<p>服务器同样根据 Client Random、Server Random 和预主密钥，计算出与客户端相同的会话密钥。</p>
<h4 id="c-发送-“Server-Finished”-消息">c. 发送 “Server Finished” 消息</h4>
<p>服务器发送一条加密的 “Finished” 消息给客户端，表明握手已完成。这条消息是对之前所有握手消息的摘要（通过 HMAC 计算），用于验证握手过程的完整性。</p>
<h4 id="d-客户端发送-“Client-Finished”-消息">d. 客户端发送 “Client Finished” 消息</h4>
<p>客户端收到服务器的 “Finished” 消息后，也会发送一条加密的 “Finished” 消息给服务器，确认握手过程成功完成。</p>
<hr>
<h3 id="5-加密通信开始"><strong>5. 加密通信开始</strong></h3>
<p>握手完成后，客户端和服务器之间的所有通信都将使用协商好的对称加密算法和会话密钥进行加密和解密。此时，HTTPS 的安全信道已建立，可以开始传输应用层数据（如 HTTP 请求和响应）。</p>
<hr>
<h3 id="总结"><strong>总结</strong></h3>
<p>TLS/SSL 四次握手的核心目标是：</p>
<ol>
<li><strong>协商加密算法</strong>：确定双方支持的最佳加密套件。</li>
<li><strong>身份验证</strong>：通过证书验证服务器（甚至客户端）的身份。</li>
<li><strong>密钥交换</strong>：通过非对称加密（如 RSA 或 ECDHE）安全地协商出对称加密的会话密钥。</li>
<li><strong>完整性保护</strong>：通过消息摘要（HMAC）确保握手过程未被篡改。</li>
</ol>
<p>在现代协议（如 TLS 1.3）中，握手过程得到了优化，减少了交互次数，从而提高了性能。</p>
<h1>这个过程有几次加密</h1>
<ul>
<li>第一次加密：客户端使用服务器的公钥加密预主密钥（非对称加密）。</li>
<li>第二次解密：服务器使用自己的私钥解密预主密钥（非对称解密）。</li>
<li>第三次加密：客户端和服务器使用对称加密算法加密 “Finished” 消息。</li>
<li>第四次加密：后续通信数据使用对称加密算法进行加密。</li>
</ul>
<h1>linux 常用命令</h1>
<p>在 Linux 操作系统中，掌握一些常用的命令可以极大地提高工作效率。以下是一些基础且重要的 Linux 命令及其简要说明：</p>
<ol>
<li>
<p><strong>文件和目录操作</strong></p>
<ul>
<li><code>ls</code>：列出目录内容。
<ul>
<li><code>-l</code> 以长格式显示文件详细信息。</li>
<li><code>-a</code> 显示所有文件，包括隐藏文件。</li>
</ul>
</li>
<li><code>cd</code>：改变当前工作目录。</li>
<li><code>pwd</code>：显示当前工作目录路径。</li>
<li><code>mkdir</code>：创建新目录。</li>
<li><code>rmdir</code>：删除空目录。</li>
<li><code>rm</code>：删除文件或目录。
<ul>
<li><code>-r</code> 递归删除目录及其内容。</li>
<li><code>-f</code> 强制删除而不提示确认。</li>
</ul>
</li>
<li><code>cp</code>：复制文件或目录。</li>
<li><code>mv</code>：移动或重命名文件或目录。</li>
</ul>
</li>
<li>
<p><strong>文件查看与编辑</strong></p>
<ul>
<li><code>cat</code>：显示文件内容。</li>
<li><code>more</code> 或 <code>less</code>：分页显示文件内容，<code>less</code> 更加灵活。</li>
<li><code>nano</code> 或 <code>vim</code>：文本编辑器，用于编辑文件。</li>
<li><code>head</code> / <code>tail</code>：分别显示文件的开头或结尾部分，默认显示 10 行。
<ul>
<li><code>-n</code> 可指定显示行数。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>系统信息</strong></p>
<ul>
<li><code>df</code>：报告文件系统的磁盘使用情况。</li>
<li><code>du</code>：估计文件空间使用情况。</li>
<li><code>top</code> 或 <code>htop</code>（需要安装）：实时显示系统的进程状态。</li>
<li><code>ps</code>：显示当前进程的状态。</li>
<li><code>free</code>：显示系统内存使用情况。</li>
</ul>
</li>
<li>
<p><strong>网络相关</strong></p>
<ul>
<li><code>ifconfig</code> 或 <code>ip</code>：配置网络接口参数。</li>
<li><code>ping</code>：测试与其他主机的连接。</li>
<li><code>netstat</code>：显示网络连接、路由表等信息。</li>
<li><code>ss</code>：更现代的替代<code>netstat</code>，显示套接字统计信息。</li>
<li><code>scp</code>：安全地远程拷贝文件。</li>
<li><code>ssh</code>：通过加密通道远程登录到另一台计算机。</li>
</ul>
</li>
<li>
<p><strong>权限管理</strong></p>
<ul>
<li><code>chmod</code>：更改文件或目录的访问权限。</li>
<li><code>chown</code>：更改文件或目录的所有者。</li>
<li><code>chgrp</code>：更改文件或目录的所属组。</li>
</ul>
</li>
<li>
<p><strong>压缩与解压</strong></p>
<ul>
<li><code>tar</code>：打包或解包文件，常用于<code>.tar</code>, <code>.tar.gz</code>, 和 <code>.tar.bz2</code> 文件。</li>
<li><code>gzip</code> / <code>gunzip</code>：压缩或解压文件为<code>.gz</code>格式。</li>
<li><code>bzip2</code> / <code>bunzip2</code>：压缩或解压文件为<code>.bz2</code>格式。</li>
</ul>
</li>
<li>
<p><strong>搜索</strong></p>
<ul>
<li><code>find</code>：查找文件和目录。</li>
<li><code>grep</code>：在文件中搜索匹配的行。</li>
<li><code>whereis</code>：定位命令的二进制文件、源代码文件和帮助文档的位置。</li>
<li><code>which</code>：显示给定命令的完整路径。</li>
</ul>
</li>
<li>
<p><strong>其他</strong></p>
<ul>
<li><code>man</code>：显示命令的手册页。</li>
<li><code>history</code>：显示已执行命令的历史记录。</li>
<li><code>echo</code>：输出文本或变量的内容。</li>
<li><code>sudo</code>：以另一个用户的身份执行命令，通常是 root 用户。</li>
</ul>
</li>
</ol>
<h1>服务器性能问题怎么定位</h1>
<ol>
<li>确定问题：首先明确性能问题的类型。比如是响应时间慢、吞吐量低还是资源耗尽（CPU、内存、磁盘或网络）；确认问题是否持续存在还是间歇性出现。</li>
<li>监控与收集数据：使用监控工具来实时跟踪服务器的性能指标，如 CPU 使用率、内存使用情况、磁盘 I/O、网络流量等。常用的工具有 Nagios、Zabbix、Prometheus 等；查看日志文件，包括应用程序日志、数据库日志以及系统日志，寻找错误信息或异常行为。</li>
<li>分析性能瓶颈：</li>
</ol>
<ul>
<li>如果是 CPU 瓶颈，可能需要检查是否有进程占用过多的 CPU 资源，可以使用 top 或 htop 命令查看。</li>
<li>内存问题可以通过 free、vmstat 等命令来检查是否存在内存泄漏或交换空间使用不当的情况。</li>
<li>对于磁盘 I/O 瓶颈，可以使用 iostat、iotop 等工具进行诊断。</li>
<li>网络性能问题则可以借助 ping、traceroute、netstat、iftop 等工具排查。</li>
</ul>
<h1>socket 网络编程了解吗</h1>
<p>Socket 网络编程是实现不同计算机之间，或同一台计算机内不同进程之间的通信的一种编程方式。它为网络通信提供了一种简便的接口，使得开发者可以忽略底层网络协议的复杂性，专注于应用层逻辑的开发。Socket 起源于 Unix 系统，现在已经成为跨平台的标准编程接口。</p>
<p>Socket 类型：</p>
<ul>
<li><strong>流式 Socket（SOCK_STREAM）</strong>：提供一个有序、可靠、双向的连接导向的数据传输通道。使用 TCP 协议来保证数据的完整性和顺序。</li>
<li><strong>数据报 Socket（SOCK_DGRAM）</strong>：支持一种无连接的服务，数据通过相互独立的报文进行传输，并且不保证顺序或者可靠性。通常使用 UDP 协议。</li>
</ul>
<p>基本概念：</p>
<ul>
<li>IP 地址：用于标识网络上的设备。</li>
<li>端口号：用于区分同一设备上的不同服务或进程。</li>
<li>协议：规定了数据在网络上传输的规则，常见的有 TCP 和 UDP。</li>
</ul>
<p>工作流程：</p>
<ul>
<li>创建 Socket：通过调用 API 函数创建一个新的 socket 对象。</li>
<li>绑定地址：服务器程序需要绑定到特定的 IP 地址和端口上，以便客户端能够找到并连接到它。</li>
<li>监听连接请求：服务器设置好 socket 后，开始监听来自客户端的连接请求。</li>
<li>接受连接：一旦收到客户端的连接请求，服务器接受这个连接，从而建立起一条与客户端的通信线路。</li>
<li>发送/接收数据：双方可以通过建立好的 socket 发送和接收数据。</li>
<li>关闭连接：当通信结束时，双方都应关闭 socket 以释放资源。</li>
</ul>
<p>编程示例：</p>
<p>服务器代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">server_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">server_socket.bind((<span class="string">&#x27;localhost&#x27;</span>, <span class="number">8080</span>))</span><br><span class="line">server_socket.listen(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    client_socket, addr = server_socket.accept()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;Got a connection from %s&#x27;</span> % <span class="built_in">str</span>(addr))</span><br><span class="line">    client_socket.send(<span class="string">&#x27;Thank you for connecting&#x27;</span>.encode())</span><br><span class="line">    client_socket.close()</span><br></pre></td></tr></table></figure>
<p>客户端代码</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"></span><br><span class="line">client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">client_socket.connect((<span class="string">&#x27;localhost&#x27;</span>, <span class="number">8080</span>))</span><br><span class="line">msg = client_socket.recv(<span class="number">1024</span>)</span><br><span class="line"><span class="built_in">print</span>(msg.decode())</span><br><span class="line">client_socket.close()</span><br></pre></td></tr></table></figure>
<p>在这个例子中，服务器等待客户端的连接，并在接收到连接后发送一条消息给客户端。客户端尝试连接到服务器，并打印从服务器接收到的消息。</p>
<h1>hashmap 的理解</h1>
<ol>
<li>基本特性</li>
</ol>
<ul>
<li>键值对存储：HashMap 以键值对的形式存储数据，键是唯一的，而值可以重复。</li>
<li>无序性：HashMap 不保证元素的顺序，即插入的顺序与迭代的顺序可能不同。</li>
<li>允许 null 键和 null 值：HashMap 允许一个 null 键和多个 null 值。</li>
<li>非线程安全：HashMap 不是线程安全的。如果需要在多线程环境中使用，可以考虑 ConcurrentHashMap 或使用 Collections.synchronizedMap()方法包装。</li>
<li>时间复杂度：在理想情况下，HashMap 的查找、插入和删除操作的时间复杂度为 O(1)。</li>
</ul>
<ol start="2">
<li>内部实现原理<br>
HashMap 的底层实现是一个数组 + 链表/红黑树的组合：</li>
</ol>
<ul>
<li>数组：HashMap 内部维护了一个数组（称为桶数组），每个数组元素称为一个桶。</li>
<li>链表：当发生哈希冲突时，HashMap 会将冲突的键值对以链表的形式存储在同一个桶中。</li>
<li>红黑树：从 JDK 8 开始，当链表长度超过一定阈值（默认为 8）且桶数组的大小大于等于 64 时，链表会转换为红黑树，以提高性能。</li>
</ul>
<ol start="3">
<li>
<p>哈希函数:<br>
HashMap 通过键的 hashCode()方法计算哈希值，并通过(n - 1) &amp; hash 的方式确定键值对存储的桶位置，其中 n 是桶数组的长度。</p>
</li>
<li>
<p>扩容机制:</p>
</li>
</ol>
<ul>
<li>当 HashMap 中的元素数量超过了负载因子（loadFactor）与桶数组长度的乘积时，HashMap 会进行扩容。</li>
<li>默认初始容量为 16，默认负载因子为 0.75。</li>
<li>扩容时，桶数组的长度会变为原来的两倍，并重新计算所有键值对的位置（rehashing）。</li>
</ul>
<h1>链表和红黑树区别</h1>
<h3 id="1-数据结构类型">1. 数据结构类型</h3>
<ul>
<li><strong>链表</strong>：是一种线性数据结构，它通过节点之间的指针连接来存储元素。每个节点包含两部分：数据域和指向下一个节点的指针（在双向链表中，还包含指向前一个节点的指针）。链表分为单向链表、双向链表和循环链表等。</li>
<li><strong>红黑树</strong>：是一种自平衡的二叉查找树（BST, Binary Search Tree），它保证了基本操作如查找、插入和删除的最大时间复杂度为 O(log n)。红黑树通过给树中的节点添加颜色属性，并遵循特定的规则来保持树的平衡。</li>
</ul>
<h3 id="2-时间复杂度">2. 时间复杂度</h3>
<ul>
<li>
<p><strong>链表</strong></p>
<ul>
<li>查找：O(n)，因为需要从头开始遍历直到找到目标元素或到达列表末尾。</li>
<li>插入/删除：
<ul>
<li>在已知位置时，单向链表为 O(1)，但找到这个位置可能需要 O(n)的时间。</li>
<li>双向链表可以在知道前驱节点的情况下以 O(1)的时间完成删除操作。</li>
</ul>
</li>
</ul>
</li>
<li>
<p><strong>红黑树</strong></p>
<ul>
<li>查找：O(log n)，由于其平衡性质确保了树的高度与节点数量成对数关系。</li>
<li>插入/删除：O(log n)，虽然这些操作可能会导致树不再平衡，需要进行旋转和重新着色来恢复平衡，但这些调整操作也是 O(log n)级别的。</li>
</ul>
</li>
</ul>
<h3 id="3-空间开销">3. 空间开销</h3>
<ul>
<li><strong>链表</strong>：需要额外的空间用于存储指向下一个节点（对于双向链表还包括指向前一个节点）的指针。</li>
<li><strong>红黑树</strong>：除了存储数据外，还需要为每个节点存储颜色信息，并且为了维持平衡，在执行插入和删除操作后可能需要进行旋转操作，这会带来一定的空间和时间成本。</li>
</ul>
<h3 id="4-应用场景">4. 应用场景</h3>
<ul>
<li><strong>链表</strong>：适用于频繁地在序列两端进行插入和删除操作的场景，比如实现栈或队列。</li>
<li><strong>红黑树</strong>：适合于需要快速查找、同时也有较多插入和删除操作的场景，例如 Java 中的<code>TreeMap</code>和<code>TreeSet</code>就是基于红黑树实现的，用来提供有序映射和集合功能。</li>
</ul>
<h3 id="5-平衡与排序">5. 平衡与排序</h3>
<ul>
<li><strong>链表</strong>：不自动维护任何顺序，除非手动排序。</li>
<li><strong>红黑树</strong>：自动保持平衡并按照键值大小有序排列，支持高效的范围查询。</li>
</ul>
<h1>b+树怎么理解</h1>
<ol>
<li>基本概念</li>
</ol>
<ul>
<li>所有数据存储在叶子节点：内部节点只存储索引信息，不存储实际数据。</li>
<li>叶子节点之间通过指针连接：形成一个链表，便于范围查询和顺序访问。</li>
<li>更高的扇出（Fan-out）：由于内部节点只存储索引，B+树可以容纳更多的键值，从而减少了树的高度，提高了磁盘 I/O 效率。</li>
</ul>
<ol start="2">
<li>B+树的特点</li>
</ol>
<ul>
<li>高效的磁盘 I/O：
<ul>
<li>数据库和文件系统通常将数据存储在磁盘上，而磁盘 I/O 操作比内存访问慢得多。</li>
<li>B+树通过减少树的高度（增加扇出）来降低磁盘访问次数，从而提高性能。</li>
</ul>
</li>
<li>范围查询：
<ul>
<li>由于叶子节点之间通过指针连接，B+树非常适合范围查询。例如，查找键值在 [10, 20] 范围内的所有数据时，只需找到起始位置并沿着叶子节点链表遍历即可。</li>
</ul>
</li>
<li>插入和删除：
<ul>
<li>插入和删除操作可能会导致节点分裂或合并，但 B+树通过自平衡机制确保树的高度保持较小。</li>
</ul>
</li>
<li>单向性：
<ul>
<li>在 B+树中，只有叶子节点存储实际数据，因此所有的查找操作最终都会到达叶子节点。这与 B 树不同，B 树的内部节点也可能存储数据。</li>
</ul>
</li>
</ul>
<ol start="3">
<li>B+树的应用</li>
</ol>
<ul>
<li>数据库索引：
<ul>
<li>B+树是最常用的数据库索引结构之一，例如 MySQL 的 InnoDB 存储引擎使用 B+树作为主键索引。</li>
<li>它支持高效的等值查询和范围查询，同时利用叶子节点链表实现快速的顺序扫描。</li>
</ul>
</li>
<li>文件系统
<ul>
<li>文件系统（如 NTFS、EXT4）使用 B+树管理磁盘块的分配和文件的元数据。</li>
<li>通过 B+树，文件系统能够快速定位文件数据所在的磁盘位置。</li>
</ul>
</li>
</ul>
<h1>b+树和红黑树区别</h1>
<h3 id="1-数据存储位置">1. 数据存储位置</h3>
<ul>
<li><strong>B+树</strong>：所有数据项都存储在叶子节点上，内部节点仅用于索引，包含指向子节点的指针以及用于分割范围的键。这种设计使得 B+树非常适合于需要大量数据存储并且要进行快速查找、插入、删除操作的场景，如数据库索引和文件系统。</li>
<li><strong>红黑树</strong>：每个节点既可以是内部节点也可以是叶子节点，并且可以包含数据。这意味着红黑树的数据可能分布在整棵树中。</li>
</ul>
<h3 id="2-查找效率与范围查询">2. 查找效率与范围查询</h3>
<ul>
<li><strong>B+树</strong>：由于其叶子节点通过指针相连，形成一个链表，因此支持高效的范围查询和顺序访问。这对于需要频繁执行范围扫描的应用（例如数据库管理系统中的索引）非常有用。</li>
<li><strong>红黑树</strong>：虽然也提供了对数时间复杂度 O(log n)的查找性能，但由于它不是专门为范围查询设计的，所以对于连续范围的数据检索不如 B+树高效。</li>
</ul>
<h3 id="3-平衡机制">3. 平衡机制</h3>
<ul>
<li><strong>B+树</strong>：通过分裂和合并节点来保持平衡，确保所有叶子节点都在同一深度，从而保证了查找效率的一致性。</li>
<li><strong>红黑树</strong>：通过颜色标记（红色或黑色）和一系列规则（如根节点必须为黑色、没有两个连续的红色节点等）来维持树的高度接近 log(n)，从而实现近似平衡。</li>
</ul>
<h3 id="4-应用场景-2">4. 应用场景</h3>
<ul>
<li><strong>B+树</strong>：通常用于需要处理大量数据并提供快速随机访问的场合，特别是当数据量大到无法完全加载进内存时，比如数据库索引、文件系统等。</li>
<li><strong>红黑树</strong>：适用于内存中的动态集合或映射表的操作，例如 Java 中的<code>TreeMap</code>和<code>TreeSet</code>就是基于红黑树实现的，适合那些需要有序遍历元素的情况。</li>
</ul>
<h3 id="简单总结">简单总结</h3>
<ul>
<li>如果你的应用需要处理大量的磁盘 I/O 操作，并且经常需要做范围查询，那么 B+树可能是更好的选择。</li>
<li>如果你主要是在内存中操作较小规模的数据集，并且需要维护一个有序的数据结构来进行快速查找和遍历，那么红黑树会更加合适。</li>
</ul>
<h1>mysql 事务特点</h1>
<h3 id="1-原子性（Atomicity）">1. 原子性（Atomicity）</h3>
<ul>
<li><strong>含义</strong>：事务被视为一个不可分割的工作单位，事务中的操作要么全部成功执行，要么完全不执行。如果在执行过程中发生错误，整个事务将被回滚到事务开始前的状态，就像从未发生过一样。</li>
<li><strong>实现机制</strong>：通过日志（redo log 和 undo log）来保证。redo log 用于记录已提交事务的操作以便在系统崩溃时恢复，而 undo log 则用于撤销未完成的事务。</li>
</ul>
<h3 id="2-一致性（Consistency）">2. 一致性（Consistency）</h3>
<ul>
<li><strong>含义</strong>：事务应该把数据库从一种一致状态转换为另一种一致状态。这意味着在事务开始之前和结束之后，数据库的完整性约束没有被违反。</li>
<li><strong>实现机制</strong>：这依赖于开发者的正确使用，即编写能够保持或恢复数据库一致性的事务逻辑。此外，MySQL 本身提供的约束（如外键、检查约束等）也有助于维护一致性。</li>
</ul>
<h3 id="3-隔离性（Isolation）">3. 隔离性（Isolation）</h3>
<ul>
<li><strong>含义</strong>：多个事务并发执行时，每个事务不应受到其他事务的影响，如同它们是串行执行的。隔离级别定义了事务之间的可见性程度，MySQL 支持四种隔离级别：
<ul>
<li><strong>读未提交（Read Uncommitted）</strong>：最低级别的隔离，允许脏读。</li>
<li><strong>读已提交（Read Committed）</strong>：阻止脏读，但可能出现不可重复读。</li>
<li><strong>可重复读（Repeatable Read）</strong>：默认级别，解决了不可重复读的问题，但在某些情况下可能会出现幻读。</li>
<li><strong>序列化（Serializable）</strong>：最高的隔离级别，通过强制事务串行执行避免所有并发问题。</li>
</ul>
</li>
<li><strong>实现机制</strong>：主要是通过锁机制和多版本并发控制（MVCC）来实现不同级别的隔离。</li>
</ul>
<h3 id="4-持久性（Durability）">4. 持久性（Durability）</h3>
<ul>
<li><strong>含义</strong>：一旦事务被提交，它所做的更改就应该是永久性的，即使系统发生故障也不会丢失。</li>
<li><strong>实现机制</strong>：通过写入重做日志（redo log）并在适当的时候刷新到磁盘上来保证。即使数据库崩溃，也可以根据这些日志恢复已经提交的数据。</li>
</ul>
<h1>脏读、不可重复度、幻读</h1>
<ul>
<li>脏读： 一个事务能够读取另一个事务尚未提交的数据更新结果。</li>
<li>不可重复读：在一个事务内两次读取同一行数据可能得到不同的结果，因为在这两次读取之间另一个事务修改并提交了该行数据。</li>
<li>幻读：当一个事务正在访问某个范围内的记录，并且另一个事务在这个范围内插入了新的记录或删除了记录，导致第一个事务前后看到的不同集合的记录。</li>
</ul>
<h1>幻读怎么解决</h1>
<h1>间隙锁是哪个隔离级别用</h1>
<h1>mysql 索引理解</h1>
<h1>索引什么数据结构实现</h1>
<h1>索引优化技巧</h1>
<h1>慢查询怎么处理</h1>
<h1>简单说 redis 用过的数据结构和底层实现</h1>
<h1>list 怎么作为消息队列</h1>
<h1>redis 双写一致性问题，怎么解决的</h1>
<h1>解释缓存穿透</h1>
<h1>说下布隆过滤器</h1>
<h1>布隆过滤器的误判率怎么理解</h1>


        <hr>
        <!-- Pager -->
        <ul class="pager">
          
          
          <li class="next">
            <a href="/my/面试总结20250423/" data-toggle="tooltip" data-placement="top" title="面试总结20250423">Next Post &rarr;</a>
          </li>
          
        </ul>

        
        <!-- tip start -->
        <!-- tip -->
<!-- tip start -->
<div class="tip">
  <p>
    
      If you like this blog or find it useful for you, you are welcome to comment on it. You are also welcome to share this blog, so that more people can participate in it. If the images used in the blog infringe your copyright, please contact the author to delete them. Thank you !
    
  </p>
</div>
<!-- tip end -->

        <!-- tip end -->
        

        
        <hr>

        <!-- comments start -->
        <!-- 1. gitalk comment -->

  <!-- gitalk start -->
  <!-- Docs:https://github.com/gitalk/gitalk/blob/master/readme-cn.md -->

  <div id="gitalk-container"></div>

  
    <!-- <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.js"></script> -->
    <script src="/js/comment/gitalk.js"></script>
  

  <script>
    var gitalk = new Gitalk({
      clientID: 'b8ec5eaa492aead3f896',
      clientSecret: '8c6a11eb25e98c705bfc57f7a9c5ed92bcb1ce09',
      repo: 'blog_comment',
      owner: 'WANGKANG1717',
      admin: 'WANGKANG1717',
      id: 'Wed Apr 23 2025 10:12:20 GMT+0800', // Ensure uniqueness and length less than 50
      distractionFreeMode: false, // Facebook-like distraction free mode
      perPage: 10,
      pagerDirection: 'last',
      createIssueManually: false,
      language: 'zh-CN',
      proxy: 'https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token'
    });
    gitalk.render('gitalk-container');

    var gtFolded = () => {
      setTimeout(function () {
        let markdownBody = document.getElementsByClassName("markdown-body");
        let list = Array.from(markdownBody);
        list.forEach(item => {
          if (item.clientHeight > 250) {
            item.classList.add('gt-comment-body-folded');
            item.style.maxHeight = '250px';
            item.title = 'Click to Expand';
            item.onclick = function () {
              item.classList.remove('gt-comment-body-folded');
              item.style.maxHeight = '';
              item.title = '';
              item.onclick = null;
            };
          }
        })
      }, 800);
    }
  </script>

  <!-- gitalk end -->


<!-- 2. gitment comment -->


<!-- 3. disqus comment -->


        <!-- comments end -->
        <hr>

      </div>

      <!-- Catalog: Tabe of Content -->
      <!-- Table of Contents -->

    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">tcp 协议理解</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#TCP-%E4%B8%8E-UDP-%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%88%E9%87%8D%E8%A6%81%EF%BC%89"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text">TCP 与 UDP 的区别（重要）</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%80%89%E6%8B%A9-TCP%EF%BC%8C%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E9%80%89-UDP"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text">什么时候选择 TCP，什么时候选 UDP?</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#TCP-%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E4%BC%A0%E8%BE%93%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%80%A7%EF%BC%9F"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text">TCP 如何保证传输的可靠性？</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">三次握手和四次挥手具体说下</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">3.</span> <span class="toc-nav-text">建立连接半连接状态是什么</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">4.</span> <span class="toc-nav-text">说下连接断开 time_wait 状态</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF-TIME-WAIT-%E7%8A%B6%E6%80%81%EF%BC%9F"><span class="toc-nav-number">4.1.</span> <span class="toc-nav-text">什么是 TIME_WAIT 状态？</span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81-TIME-WAIT-%E7%8A%B6%E6%80%81%EF%BC%9F"><span class="toc-nav-number">4.2.</span> <span class="toc-nav-text">为什么需要 TIME_WAIT 状态？</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">5.</span> <span class="toc-nav-text">说下 https 协议过程</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">6.</span> <span class="toc-nav-text">说下 tls&#x2F;ssl 四次握手</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-Client-Hello%EF%BC%88%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%97%AE%E5%80%99%EF%BC%89"><span class="toc-nav-number">6.0.1.</span> <span class="toc-nav-text">1. Client Hello（客户端问候）</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-Server-Hello%EF%BC%88%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%97%AE%E5%80%99%EF%BC%89"><span class="toc-nav-number">6.0.2.</span> <span class="toc-nav-text">2. Server Hello（服务器问候）</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%AF%86%E9%92%A5%E4%BA%A4%E6%8D%A2%E4%B8%8E%E9%AA%8C%E8%AF%81"><span class="toc-nav-number">6.0.3.</span> <span class="toc-nav-text">3. 客户端密钥交换与验证</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#a-%E9%AA%8C%E8%AF%81%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%9A%84%E8%AF%81%E4%B9%A6"><span class="toc-nav-number">6.0.3.1.</span> <span class="toc-nav-text">a. 验证服务器的证书</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#b-%E7%94%9F%E6%88%90%E9%A2%84%E4%B8%BB%E5%AF%86%E9%92%A5-Pre-Master-Secret"><span class="toc-nav-number">6.0.3.2.</span> <span class="toc-nav-text">b. 生成预主密钥 (Pre-Master Secret)</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#c-%EF%BC%88%E5%8F%AF%E9%80%89%EF%BC%89%E5%8F%91%E9%80%81%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%AF%81%E4%B9%A6"><span class="toc-nav-number">6.0.3.3.</span> <span class="toc-nav-text">c. （可选）发送客户端证书</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#d-%E5%8F%91%E9%80%81-%E2%80%9CClient-Key-Exchange%E2%80%9D-%E6%B6%88%E6%81%AF"><span class="toc-nav-number">6.0.3.4.</span> <span class="toc-nav-text">d. 发送 “Client Key Exchange” 消息</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#e-%E8%AE%A1%E7%AE%97%E4%BC%9A%E8%AF%9D%E5%AF%86%E9%92%A5"><span class="toc-nav-number">6.0.3.5.</span> <span class="toc-nav-text">e. 计算会话密钥</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%AF%86%E9%92%A5%E4%BA%A4%E6%8D%A2%E4%B8%8E%E5%AE%8C%E6%88%90%E6%8F%A1%E6%89%8B"><span class="toc-nav-number">6.0.4.</span> <span class="toc-nav-text">4. 服务器密钥交换与完成握手</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#a-%E8%A7%A3%E5%AF%86%E9%A2%84%E4%B8%BB%E5%AF%86%E9%92%A5"><span class="toc-nav-number">6.0.4.1.</span> <span class="toc-nav-text">a. 解密预主密钥</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#b-%E8%AE%A1%E7%AE%97%E4%BC%9A%E8%AF%9D%E5%AF%86%E9%92%A5"><span class="toc-nav-number">6.0.4.2.</span> <span class="toc-nav-text">b. 计算会话密钥</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#c-%E5%8F%91%E9%80%81-%E2%80%9CServer-Finished%E2%80%9D-%E6%B6%88%E6%81%AF"><span class="toc-nav-number">6.0.4.3.</span> <span class="toc-nav-text">c. 发送 “Server Finished” 消息</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#d-%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%8F%91%E9%80%81-%E2%80%9CClient-Finished%E2%80%9D-%E6%B6%88%E6%81%AF"><span class="toc-nav-number">6.0.4.4.</span> <span class="toc-nav-text">d. 客户端发送 “Client Finished” 消息</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-%E5%8A%A0%E5%AF%86%E9%80%9A%E4%BF%A1%E5%BC%80%E5%A7%8B"><span class="toc-nav-number">6.0.5.</span> <span class="toc-nav-text">5. 加密通信开始</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-nav-number">6.0.6.</span> <span class="toc-nav-text">总结</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">7.</span> <span class="toc-nav-text">这个过程有几次加密</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">8.</span> <span class="toc-nav-text">linux 常用命令</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">9.</span> <span class="toc-nav-text">服务器性能问题怎么定位</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">10.</span> <span class="toc-nav-text">socket 网络编程了解吗</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">11.</span> <span class="toc-nav-text">hashmap 的理解</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">12.</span> <span class="toc-nav-text">链表和红黑树区别</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E7%B1%BB%E5%9E%8B"><span class="toc-nav-number">12.0.1.</span> <span class="toc-nav-text">1. 数据结构类型</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-%E6%97%B6%E9%97%B4%E5%A4%8D%E6%9D%82%E5%BA%A6"><span class="toc-nav-number">12.0.2.</span> <span class="toc-nav-text">2. 时间复杂度</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-%E7%A9%BA%E9%97%B4%E5%BC%80%E9%94%80"><span class="toc-nav-number">12.0.3.</span> <span class="toc-nav-text">3. 空间开销</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-nav-number">12.0.4.</span> <span class="toc-nav-text">4. 应用场景</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#5-%E5%B9%B3%E8%A1%A1%E4%B8%8E%E6%8E%92%E5%BA%8F"><span class="toc-nav-number">12.0.5.</span> <span class="toc-nav-text">5. 平衡与排序</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">13.</span> <span class="toc-nav-text">b+树怎么理解</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">14.</span> <span class="toc-nav-text">b+树和红黑树区别</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E4%BD%8D%E7%BD%AE"><span class="toc-nav-number">14.0.1.</span> <span class="toc-nav-text">1. 数据存储位置</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-%E6%9F%A5%E6%89%BE%E6%95%88%E7%8E%87%E4%B8%8E%E8%8C%83%E5%9B%B4%E6%9F%A5%E8%AF%A2"><span class="toc-nav-number">14.0.2.</span> <span class="toc-nav-text">2. 查找效率与范围查询</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-%E5%B9%B3%E8%A1%A1%E6%9C%BA%E5%88%B6"><span class="toc-nav-number">14.0.3.</span> <span class="toc-nav-text">3. 平衡机制</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-2"><span class="toc-nav-number">14.0.4.</span> <span class="toc-nav-text">4. 应用场景</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#%E7%AE%80%E5%8D%95%E6%80%BB%E7%BB%93"><span class="toc-nav-number">14.0.5.</span> <span class="toc-nav-text">简单总结</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">15.</span> <span class="toc-nav-text">mysql 事务特点</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#1-%E5%8E%9F%E5%AD%90%E6%80%A7%EF%BC%88Atomicity%EF%BC%89"><span class="toc-nav-number">15.0.1.</span> <span class="toc-nav-text">1. 原子性（Atomicity）</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#2-%E4%B8%80%E8%87%B4%E6%80%A7%EF%BC%88Consistency%EF%BC%89"><span class="toc-nav-number">15.0.2.</span> <span class="toc-nav-text">2. 一致性（Consistency）</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#3-%E9%9A%94%E7%A6%BB%E6%80%A7%EF%BC%88Isolation%EF%BC%89"><span class="toc-nav-number">15.0.3.</span> <span class="toc-nav-text">3. 隔离性（Isolation）</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#4-%E6%8C%81%E4%B9%85%E6%80%A7%EF%BC%88Durability%EF%BC%89"><span class="toc-nav-number">15.0.4.</span> <span class="toc-nav-text">4. 持久性（Durability）</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">16.</span> <span class="toc-nav-text">脏读、不可重复度、幻读</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">17.</span> <span class="toc-nav-text">幻读怎么解决</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">18.</span> <span class="toc-nav-text">间隙锁是哪个隔离级别用</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">19.</span> <span class="toc-nav-text">mysql 索引理解</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">20.</span> <span class="toc-nav-text">索引什么数据结构实现</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">21.</span> <span class="toc-nav-text">索引优化技巧</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">22.</span> <span class="toc-nav-text">慢查询怎么处理</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">23.</span> <span class="toc-nav-text">简单说 redis 用过的数据结构和底层实现</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">24.</span> <span class="toc-nav-text">list 怎么作为消息队列</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">25.</span> <span class="toc-nav-text">redis 双写一致性问题，怎么解决的</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">26.</span> <span class="toc-nav-text">解释缓存穿透</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">27.</span> <span class="toc-nav-text">说下布隆过滤器</span></a></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link"><span class="toc-nav-number">28.</span> <span class="toc-nav-text">布隆过滤器的误判率怎么理解</span></a></li></ol>
        
        </div>
      </aside>
    



      <!-- Sidebar Container -->
      <div class="
                col-lg-8 col-lg-offset-1
                col-md-10 col-md-offset-1
                sidebar-container">

        <!-- Featured Tags -->
        
        <section>
          <!-- no hr -->
          <h5>
            <a href="/tags/">FEATURED TAGS</a>
          </h5>
          <div class="tags">
            
            <a class="tag" href="/tags/#面试" title="面试">面试</a>
            
          </div>
        </section>
        

        <!-- Friends Blog -->
        
        <hr>
        <h5>FRIENDS</h5>
        <ul class="list-inline">

          
          <li>
            <a href="https://gitee.com/purify_wang" target="_blank">myGitee</a>
          </li>
          
          <li>
            <a href="https://blog.csdn.net/qq_44685940" target="_blank">myCSDN</a>
          </li>
          
          <li>
            <a href="https://blog.csdn.net/m0_50994219" target="_blank">curiostyhclzm</a>
          </li>
          
        </ul>
        
      </div>
    </div>
  </div>
</article>



<!-- anchorjs start -->
<!-- async load function -->
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script type="text/javascript">
  // async load function
  function async (u, c) {
    var d = document,
      t = 'script',
      o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
    o.src = u;
    if (c) {
      o.addEventListener('load', function(e) {
        c(null, e);
      }, false);
    }
    s.parentNode.insertBefore(o, s);
  };
</script>
<script type="text/javascript">
  //anchor-js, Doc:http://bryanbraun.github.io/anchorjs/
  async ("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js", function() {
    anchors.options = {
      visible: 'hover',
      placement: 'left',
      // icon: 'ℬ'
      icon: '❡'
    };
    anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
  });
</script>
<style>
  /* place left on bigger screen */
  @media all and (min-width: 800px) {
    .anchorjs-link {
      position: absolute;
      left: -0.75em;
      font-size: 1.1em;
      margin-top: -0.1em;
    }
  }
</style>

<!-- anchorjs end -->



		<!-- Footer (contains ThemeColor、viewer) -->
		<!-- Footer -->
<footer>
	<div class="container">
		<div class="row">
			<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
				<ul class="list-inline text-center">
					 
					<li>
						<a
							target="_blank"
							href="https://github.com/WANGKANG1717"
						>
							<span class="fa-stack fa-lg">
								<i class="fa fa-circle fa-stack-2x"></i>
								<i class="fa fa-github fa-stack-1x fa-inverse"></i>
							</span>
						</a>
					</li>
					      
				</ul>
				<p class="copyright text-muted">
					Copyright &copy; WK 2025
					<br />
					<!-- <a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/">浙ICP备2021029629号</a> -->
				</p>
			</div>
		</div>
	</div>
</footer>

<a id="rocket" href="#top" class=""></a>


<!-- jQuery -->
<script
	type="text/javascript"
	src="/js/jquery.min.js"
></script>
<!-- Bootstrap Core JavaScript -->
<script
	type="text/javascript"
	src="/js/bootstrap.min.js"
></script>
<!-- Custom Theme JavaScript -->
<script
	type="text/javascript"
	src="/js/hux-blog.min.js"
></script>
<!-- catalog -->
<script async="true" type="text/javascript" src="/js/catalog.js"></script>
<!-- totop(rocket) -->
<script async="true" type="text/javascript" src="/js/totop.js"></script>


<!-- Busuanzi JavaScript -->
<script
	async="async"
	src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"
></script>
 
<!-- Scroll start -->
<script
	async="async"
	type="text/javascript"
	src="/js/scroll.js"
></script>
<!-- Scroll end -->
  
<!-- Mouseclick -->
<script
	type="text/javascript"
	src="/js/mouseclick.js"
	content="舍我其谁？,Laugh and grow fat...,Man proposes God disposes...,When all else is lost the future still remains...,Wasting time is robbing oneself...,Sharp tools make good work...,Cease to struggle and you cease to live...,A friend in need is a friend indeed...,Faith can move mountains...,If you gave me a chance I would take it,It&#39;s a shot in the dark but I&#39;ll make it,Know with all of your heart,you can&#39;t shake me,When I am with you,there&#39;s no place I&#39;d rather be"
	color="#9933CC,#339933,#66CCCC,#FF99CC,#CCCCFF,#6666CC,#663399,#66CC99,#FF0033,#9933CC,#339933,#66CCCC,#FF99CC,#FF0033,#66CC99"
></script>
 
<!-- ribbon -->
<script
	type="text/javascript"
	src="/js/ribbonDynamic.js"
></script>
    
<!-- viewer start -->
<!-- viewer start (Picture preview) -->

<script
	async="async"
	type="text/javascript"
	src="/js/viewer/viewer.min.js"
></script>
<script
	async="async"
	type="text/javascript"
	src="/js/viewer/pic-viewer.js"
></script>


<!-- viewer end -->


<script>
	// async load function
	function async(u, c) {
		var d = document,
			t = "script",
			o = d.createElement(t),
			s = d.getElementsByTagName(t)[0];
		o.src = u;
		if (c) {
			o.addEventListener(
				"load",
				function (e) {
					c(null, e);
				},
				false
			);
		}
		s.parentNode.insertBefore(o, s);
	}

	// fastClick.js
	async(
		"https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js",
		function () {
			var $nav = document.querySelector("nav");
			if ($nav) FastClick.attach($nav);
		}
	);
</script>

<!-- Because of the native support for backtick-style fenced code blocks right within the Markdown is landed in Github Pages, From V1.6, There is no need for Highlight.js, so Huxblog drops it officially. -
https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0 - https://help.github.com/articles/creating-and-highlighting-code-blocks/ -->
<!-- <script> async ("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function () { hljs.initHighlightingOnLoad(); }) </script> <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet"> -->

<!-- jquery.tagcloud.js -->
<!-- <script> // only load tagcloud.js in tag.html if ($('#tag_cloud').length !== 0) { async ("https://wangkang1717.github.io/js/jquery.tagcloud.js", function () { $.fn.tagcloud.defaults = { // size: { start: 1, end: 1, unit: 'em' }, color: {
start: '#bbbbee', end: '#0085a1' } }; $('#tag_cloud a').tagcloud(); }) } </script> -->


		<!-- Search -->
		
		<div class="popup search-popup local-search-popup">
  <span class="popup-btn-close">
    ESC
  </span>
  <div class="container">
    <div class="row">
      <!-- <div class="col-md-9 col-md-offset-1"> -->
      <div class="col-lg-9 col-lg-offset-1 col-md-10 col-md-offset-1 local-search-content">

        <div class="local-search-header clearfix">

          <div class="local-search-input-wrapper">
            <span class="search-icon">
              <i class="fa fa-search fa-lg" style="margin: 25px 10px 25px 20px;"></i>
            </span>
            <input autocomplete="off" placeholder="SEARCH..." type="text" id="local-search-input">
          </div>
        </div>
        <div id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>


  
    <script src="/js/ziploader.js"></script>
  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.json";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    // monitor main search box;
    var onPopupClose = function (e) {
      $('.popup').fadeOut(300);
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $('.popup').fadeIn(300);
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }
    // get search zip version
    $.get('/searchVersion.json?t=' + (+new Date()), function (res) {
      if (localStorage.getItem('searchVersion') !== res) {
        localStorage.setItem('searchVersion', res);
        initSearchJson();
      }
    });

    function initSearchJson() {
      initLoad(['/search.flv'], {
        loadOptions: {
          success: function (obj) {
            localStorage.setItem('searchJson', obj['search.json'])
          },
          error: function (e) {
            return console.log(e)
          }
        },
        returnOptions: {
          'json': TYPE_TEXT
        },
        mimeOptions: {
          'json': 'application/json'
        }
      })
    }
    // search function;
    var searchFunc = function (search_id, content_id) {
      'use strict';
      isfetched = true;
      var datas = JSON.parse(localStorage.getItem('searchJson'));
      // console.log(search_id)
      var input = document.getElementById(search_id);
      var resultContent = document.getElementById(content_id);
      var inputEventFunction = function () {
        var searchText = input.value.trim().toLowerCase();
        var keywords = searchText.split(/[\s\-]+/);
        if (keywords.length > 1) {
          keywords.push(searchText);
        }
        var resultItems = [];
        if (searchText.length > 0) {
          // perform local searching
          datas.forEach(function (data) {
            var isMatch = false;
            var hitCount = 0;
            var searchTextCount = 0;
            var title = data.title
              ? data.title.trim()
              : '';
            var titleInLowerCase = title.toLowerCase();
            var content = data.content
              ? data.content.trim().replace(/<[^>]+>/g, "")
              : '';
            var contentInLowerCase = content.toLowerCase();
            var articleUrl = decodeURIComponent(data.url);

            var date = data.date;
            var dateTime = date.replace(/T/, " ").replace(/.000Z/, "");
            var imgUrl = data.header_img;
            


            var indexOfTitle = [];
            var indexOfContent = [];
            // only match articles with not empty titles
            keywords.forEach(function (keyword) {
              function getIndexByWord(word, text, caseSensitive) {
                var wordLen = word.length;
                if (wordLen === 0) {
                  return [];
                }
                var startPosition = 0,
                  position = [],
                  index = [];
                if (!caseSensitive) {
                  text = text.toLowerCase();
                  word = word.toLowerCase();
                }
                while ((position = text.indexOf(word, startPosition)) > -1) {
                  index.push({position: position, word: word});
                  startPosition = position + wordLen;
                }
                return index;
              }
              indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
              indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
            });
            if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
              isMatch = true;
              hitCount = indexOfTitle.length + indexOfContent.length;
            }
            // show search results
            if (isMatch) {
              // sort index by position of keyword
              [indexOfTitle, indexOfContent].forEach(function (index) {
                index.sort(function (itemLeft, itemRight) {
                  if (itemRight.position !== itemLeft.position) {
                    return itemRight.position - itemLeft.position;
                  } else {
                    return itemLeft.word.length - itemRight.word.length;
                  }
                });
              });
              // merge hits into slices
              function mergeIntoSlice(text, start, end, index) {
                var item = index[index.length - 1];
                var position = item.position;
                var word = item.word;
                var hits = [];
                var searchTextCountInSlice = 0;
                while (position + word.length <= end && index.length != 0) {
                  if (word === searchText) {
                    searchTextCountInSlice++;
                  }
                  hits.push({position: position, length: word.length});
                  var wordEnd = position + word.length;
                  // move to next position of hit
                  index.pop();
                  while (index.length != 0) {
                    item = index[index.length - 1];
                    position = item.position;
                    word = item.word;
                    if (wordEnd > position) {
                      index.pop();
                    } else {
                      break;
                    }
                  }
                }
                searchTextCount += searchTextCountInSlice;
                return {hits: hits, start: start, end: end, searchTextCount: searchTextCountInSlice};
              }
              var slicesOfTitle = [];
              if (indexOfTitle.length != 0) {
                slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
              }
              var slicesOfContent = [];
              while (indexOfContent.length != 0) {
                var item = indexOfContent[indexOfContent.length - 1];
                var position = item.position;
                var word = item.word;
                // cut out 100 characters
                var start = position - 20;
                var end = position + 80;
                if (start < 0) {
                  start = 0;
                }
                if (end < position + word.length) {
                  end = position + word.length;
                }
                if (end > content.length) {
                  end = content.length;
                }
                slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
              }
              // sort slices in content by search text's count and hits' count
              slicesOfContent.sort(function (sliceLeft, sliceRight) {
                if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                  return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                  return sliceRight.hits.length - sliceLeft.hits.length;
                } else {
                  return sliceLeft.start - sliceRight.start;
                }
              });
              // select top N slices in content
              var upperBound = parseInt('1');
              if (upperBound >= 0) {
                slicesOfContent = slicesOfContent.slice(0, upperBound);
              }
              // highlight title and content
              function highlightKeyword(text, slice) {
                var result = '';
                var prevEnd = slice.start;
                slice.hits.forEach(function (hit) {
                  result += text.substring(prevEnd, hit.position);
                  var end = hit.position + hit.length;
                  result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                  prevEnd = end;
                });
                result += text.substring(prevEnd, slice.end);
                return result;
              }
              var resultItem = '';

              // if (slicesOfTitle.length != 0) {   resultItem += "<li><a target='_blank' href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>"; } else {   resultItem += "<li><a target='_blank' href='" +
              // articleUrl + "' class='search-result-title'>" + title + "</a>"; } slicesOfContent.forEach(function (slice) {   resultItem += "<a target='_blank' href='" + articleUrl + "'><p class=\"search-result\">" + highlightKeyword(content, slice) +
              // "...</p></a>"; }); resultItem += "</li>";

              if (slicesOfTitle.length != 0) {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</div><time class='search-result-date'>" + dateTime + "</time>";
              } else {
                resultItem += "<a target='_blank' href='" + articleUrl + "' class='search-result'><div class='search-result-left'><div class='search-result-title'>" + title + "</div><time class='search-result-date'>" + dateTime + "</time>";
              }
              slicesOfContent.forEach(function (slice) {
                resultItem += "<p class=\"search-result-content\">" + highlightKeyword(content, slice) + "...</p>";
              });
              resultItem += "</div><div class='search-result-right'><img class='media-image' src='" + imgUrl + "' width='64px' height='48px'></img></div></a>";

              resultItems.push({item: resultItem, searchTextCount: searchTextCount, hitCount: hitCount, id: resultItems.length});
            }
          })
        };

        if (keywords.length === 1 && keywords[0] === "") {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else if (resultItems.length === 0) {
          resultContent.innerHTML = '<div id="no-result"></div>'
        } else {
          resultItems.sort(function (resultLeft, resultRight) {
            if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
              return resultRight.searchTextCount - resultLeft.searchTextCount;
            } else if (resultLeft.hitCount !== resultRight.hitCount) {
              return resultRight.hitCount - resultLeft.hitCount;
            } else {
              return resultRight.id - resultLeft.id;
            }
          });
          var searchResultList = '<div class=\"search-result-list\">';
          resultItems.forEach(function (result) {
            searchResultList += result.item;
          })
          searchResultList += "</div>";
          resultContent.innerHTML = searchResultList;
        }
      }
      if ('auto' === 'auto') {
        input.addEventListener('input', inputEventFunction);
      } else {
        $('.search-icon').click(inputEventFunction);
        input.addEventListener('keypress', function (event) {
          if (event.keyCode === 13) {
            inputEventFunction();
          }
        });
      }
      // remove loading animation
      $('body').css('overflow', '');
      proceedsearch();
    }
    // handle and trigger popup window;
    $('.popup-trigger').click(function (e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc('local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });
    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function (e) {
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 && $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });

    document.addEventListener('mouseup', (e) => {
      var _con = document.querySelector(".local-search-content");
      if (_con) {
        if (!_con.contains(e.target)) {
          onPopupClose();
        }
      }
    });
  </script>


		
	<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
